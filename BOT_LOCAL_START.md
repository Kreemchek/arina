# ü§ñ –ó–∞–ø—É—Å–∫ Telegram-–±–æ—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (2 –º–∏–Ω—É—Ç—ã)

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª bot/.env

```bash
cat > bot/.env << 'EOF'
TELEGRAM_BOT_TOKEN="8232747700:AAGIphSHtyMAv7xdQTnmq927YCqNoofB4fY"
API_URL="http://localhost:3001/api"
NODE_ENV=development
EOF
```

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –≤—Ä—É—á–Ω—É—é —Ñ–∞–π–ª `bot/.env` —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:
```env
TELEGRAM_BOT_TOKEN="8232747700:AAGIphSHtyMAv7xdQTnmq927YCqNoofB4fY"
API_URL="http://localhost:3001/api"
NODE_ENV=development
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –±–æ—Ç–∞

```bash
cd bot
npm install
cd ..
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç–µ Backend (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)

Backend –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è –±–æ—Ç–∞!

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
docker-compose up -d

# –¢–µ—Ä–º–∏–Ω–∞–ª 2: Backend
cd backend
npm run dev
```

Backend –±—É–¥–µ—Ç –Ω–∞ http://localhost:3001

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ (–≤ —Ç—Ä–µ—Ç—å–µ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 3: Telegram Bot
cd bot
npm run dev
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
ü§ñ Telegram-–±–æ—Ç –∑–∞–ø—É—â–µ–Ω!
üì± –ë–æ—Ç –≥–æ—Ç–æ–≤ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
```

### –®–∞–≥ 5: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ Telegram

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (–∏–º—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ BotFather)
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ: `/start`

---

## üéØ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

–ü–æ—Å–ª–µ `/start`:

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
- `/help` - –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã
- `/habits` - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–∏–≤—ã—á–∫–∏
- `/goals` - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ü–µ–ª–∏  
- `/mood` - –∑–∞–ø–∏—Å–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ
- `/today` - –∑–∞–¥–∞—á–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
- `/stats` - –≤–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –ë—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏:
- üìù –ü—Ä–∏–≤—ã—á–∫–∏
- üéØ –¶–µ–ª–∏
- üòä –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚ÑπÔ∏è –ü–æ–º–æ—â—å

---

## üîî –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è:
- üåÖ **9:00** - —É—Ç—Ä–µ–Ω–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø—Ä–∏–≤—ã—á–∫–∞—Ö
- üåô **21:00** - –≤–µ—á–µ—Ä–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏

### –ò–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `bot/src/bot.js`:

```javascript
// –°—Ç—Ä–æ–∫–∏ 55-60
// –£—Ç—Ä–µ–Ω–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
cron.schedule('0 9 * * *', async () => {  // 9:00 —É—Ç—Ä–∞
  await notifications.sendDailyReminders(bot);
});

// –í–µ—á–µ—Ä–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
cron.schedule('0 21 * * *', async () => {  // 9:00 –≤–µ—á–µ—Ä–∞
  await notifications.sendEveningReminders(bot);
});
```

–§–æ—Ä–º–∞—Ç cron: `–º–∏–Ω—É—Ç—ã —á–∞—Å—ã –¥–µ–Ω—å –º–µ—Å—è—Ü –¥–µ–Ω—å_–Ω–µ–¥–µ–ª–∏`

–ü—Ä–∏–º–µ—Ä—ã:
- `0 8 * * *` - –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 8:00
- `30 20 * * *` - –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 20:30
- `0 12 * * 1` - –∫–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤ 12:00

---

## üîó –°–≤—è–∑–∫–∞ –±–æ—Ç–∞ —Å –≤–µ–±-–∞–∫–∫–∞—É–Ω—Ç–æ–º

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –°–µ–π—á–∞—Å –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–ø—Ä–æ—â—ë–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É (–¥–ª—è MVP).

### –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ —Å–∞–π—Ç–µ (http://localhost:3000 –∏–ª–∏ Vercel URL)
2. –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç
3. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```javascript
   localStorage.getItem('token')
   ```
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω

6. –í —Ñ–∞–π–ª–µ `bot/src/api.js` –≤—Ä–µ–º–µ–Ω–Ω–æ –¥–æ–±–∞–≤—å—Ç–µ (–¥–ª—è —Ç–µ—Å—Ç–∞):
   ```javascript
   // –í —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞, –ø–æ—Å–ª–µ require
   global.userSessions = {
     'YOUR_TELEGRAM_ID': {
       token: '–°–ö–û–ü–ò–†–û–í–ê–ù–ù–´–ô_–¢–û–ö–ï–ù',
       userId: 'user-id'
     }
   };
   ```

### –î–ª—è production:

–ù—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:
- OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram
- –ö–æ–¥ —Å–≤—è–∑–∫–∏ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–¥ –Ω–∞ —Å–∞–π—Ç–µ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –±–æ—Ç—É)
- –ü—Ä–∏–≤—è–∑–∫–∞ –ø–æ Telegram ID –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

---

## üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞:
```bash
cd bot
npm run dev        # –° –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π
npm start          # –û–±—ã—á–Ω—ã–π –∑–∞–ø—É—Å–∫
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ API:
```bash
curl https://api.telegram.org/bot8232747700:AAGIphSHtyMAv7xdQTnmq927YCqNoofB4fY/getMe
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
–õ–æ–≥–∏ –±—É–¥—É—Ç –≤ –∫–æ–Ω—Å–æ–ª–∏ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω –±–æ—Ç

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### "–ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç"
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—â–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ `bot/.env`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

### "Error: connect ECONNREFUSED"
- Backend –Ω–µ –∑–∞–ø—É—â–µ–Ω
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `cd backend && npm run dev`

### "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API"
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ backend –Ω–∞ http://localhost:3001
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `API_URL` –≤ `bot/.env`

### "–°–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É"
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è MVP
- –ë–æ—Ç –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –±–µ–∑ —Å–≤—è–∑–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –≤—ã—à–µ

---

## üìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

1. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`**
   - –î–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏

2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ `/help`**
   - –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥

3. **–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–≤—ã—á–∫—É –Ω–∞ —Å–∞–π—Ç–µ**
   - –ó–∞–π–¥–∏—Ç–µ –Ω–∞ localhost:3000
   - –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–≤—ã—á–∫—É

4. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É `/habits`**
   - –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ (–µ—Å–ª–∏ –∞–∫–∫–∞—É–Ω—Ç —Å–≤—è–∑–∞–Ω)

5. **–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "–í—ã–ø–æ–ª–Ω–∏—Ç—å"**
   - –ü—Ä–∏–≤—ã—á–∫–∞ –¥–æ–ª–∂–Ω–∞ –æ—Ç–º–µ—Ç–∏—Ç—å—Å—è

6. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ `/mood`**
   - –í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ
   - –ù–∞–ø–∏—à–∏—Ç–µ –∑–∞–º–µ—Ç–∫—É
   - –î–æ–ª–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –¥–Ω–µ–≤–Ω–∏–∫

---

## üéØ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–æ—Ç–∞

```
bot/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ bot.js           # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª, –∫–æ–º–∞–Ω–¥—ã, cron
‚îÇ   ‚îú‚îÄ‚îÄ handlers.js      # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ notifications.js # –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ api.js          # –ö–ª–∏–µ–Ω—Ç –¥–ª—è backend API
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ .env                # –í–∞—à–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç backend:

–í `bot/.env`:
```env
API_URL="http://localhost:–î–†–£–ì–û–ô_–ü–û–†–¢/api"
```

### –û—Ç–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–¥–ª—è —Ç–µ—Å—Ç–∞):

–í `bot/src/bot.js` –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫–∏ 55-65:
```javascript
// cron.schedule('0 9 * * *', async () => {
//   await notifications.sendDailyReminders(bot);
// });
```

### –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É:

1. –í `bot/src/handlers.js` –¥–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é:
   ```javascript
   async function handleMyCommand(ctx) {
     await ctx.reply('–ú–æ—è –∫–æ–º–∞–Ω–¥–∞!');
   }
   ```

2. –í `bot/src/bot.js` –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ:
   ```javascript
   bot.command('mycommand', handlers.handleMyCommand);
   ```

---

## üìù –ó–∞–º–µ—Ç–∫–∏

- –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ polling (–æ–ø—Ä–æ—Å —Å–µ—Ä–≤–µ—Ä–∞)
- –î–ª—è production –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å webhook
- –ë–æ—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å 24/7 –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –î–ª—è –¥–µ–ø–ª–æ—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Railway/Render/VPS

---

## ‚úÖ Checklist

- [x] –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `bot/.env` —Å —Ç–æ–∫–µ–Ω–æ–º
- [x] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `npm install`
- [ ] Backend –∑–∞–ø—É—â–µ–Ω –Ω–∞ localhost:3001
- [ ] –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω: `npm run dev`
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/start`
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∫–æ–º–∞–Ω–¥—ã `/help`, `/habits`
- [ ] –†–∞–±–æ—Ç–∞—é—Ç inline-–∫–Ω–æ–ø–∫–∏

---

**–ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ!** ü§ñüíï

–í–∞—à —Ç–æ–∫–µ–Ω: `8232747700:AAGIphSHtyMAv7xdQTnmq927YCqNoofB4fY`

